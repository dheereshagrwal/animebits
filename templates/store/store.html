{%extends 'base.html' %} {% load static %} {% block content %}
<section class="container-fluid mt-5">
  <div class="mx-2 mx-lg-5">
    {% if 'search' in request.path %}
    <h2 class="title-page">Search Results</h2>
    {% else %}
    <h2 class="title-page">Our Store</h2>
    {% endif %}
  </div>
</section>
<section class="container-fluid mt-5">
  <div class="mx-2 mx-lg-5">
    <div class="row g-5">
      <div class="col-md-3 col-xl-2">
        <aside>
          <div class="card">
            <header class="card-header">
              <div
                data-bs-toggle="collapse"
                data-bs-target="#collapse_categories"
                aria-expanded="true"
                class="d-flex"
                role="button"
              >
                <h6 class="title">Categories</h6>
                <i class="bi bi-chevron-down ms-auto"></i>
              </div>
            </header>
            <div class="collapse show" id="collapse_categories">
              <div class="card-body">
                <ul class="list-unstyled">
                  <li>
                    <a href="{% url 'store' %}" class="text-decoration-none"
                      >All Products</a
                    >
                  </li>
                  {% for category in categories %}
                  <li>
                    <a
                      href="{{category.get_url}}"
                      class="text-decoration-none {% if category.get_url in request.path %}text-success{% else %}text-black{% endif %}"
                    >
                      {{category.name}}
                    </a>
                  </li>
                  {% endfor %}
                </ul>
              </div>
            </div>
          </div>
        </aside>
        <aside class="mt-2">
          <div class="card">
            <header class="card-header">
              <div
                data-bs-toggle="collapse"
                data-bs-target="#collapse_animes"
                aria-expanded="true"
                class="d-flex"
                role="button"
              >
                <h6 class="title">Anime</h6>
                <i class="bi bi-chevron-down ms-auto"></i>
              </div>
            </header>
            <div class="collapse" id="collapse_animes">
              <div class="card-body">
                <ul class="list-unstyled">
                  <li>
                    <a href="{% url 'store' %}" class="text-decoration-none"
                      >All Products</a
                    >
                  </li>
                  {% for anime in animes %}
                  <li>
                    <a href="#" class="text-decoration-none text-secondary"
                      >{{anime.name}}</a
                    >
                  </li>
                  {% endfor %}
                </ul>
              </div>
            </div>
          </div>
        </aside>
      </div>
      <main class="col-md-9 col-xl-10">
        <header class="mb-4 font-pacifico fs-5">
          {% if products_count == 1 %}
          <span>{{products_count}} item found </span>
          {% else %}
          <span>{{products_count}} items found </span>
          {% endif %}
        </header>
        <div class="d-flex flex-wrap gap-3 gap-lg-5">
          {% if products %}
          <!-- looping through products -->
          {% for product in products %}
          <a
            href="{{product.get_url}}"
            class="text-decoration-none hvr-grow card shadow-sm rounded-5"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            title="{{ product.name }}"
            style="width: 16rem"
          >
            <img
              src="{{ product.image.url }}"
              class="card-img-top rounded-5"
              alt="{{ product.name }}"
            />
            <div class="card-body">
              <p class="card-text fs-6">{{ product.name }}</p>
              <div class="d-flex">
                <var class="card-text fw-bold">&#8377;{{product.price}}</var>
                <div class="ms-auto">
                  <i class="bi bi-star-fill text-warning"></i>
                  <i class="bi bi-star-fill text-warning"></i>
                  <i class="bi bi-star-fill text-warning"></i>
                  <i class="bi bi-star-fill text-warning"></i>
                  <i class="bi bi-star-fill text-warning"></i>
                </div>
              </div>
            </div>
          </a>
          {% endfor %}
          <!-- - -->
          {% else %}
          <h2 class="text-info">Senpai could not find anything!</h2>
          {% endif %}
        </div>
        {% if products.has_other_pages %}
        <nav aria-label="pagination" class="mt-5">
          <ul class="pagination">
            {% if products.has_previous %}
            <li class="page-item">
              <a
                class="page-link"
                href="?page={{products.previous_page_number}}"
                >Previous</a
              >
            </li>
            {% else %}
            <li class="page-item disabled">
              <a class="page-link">Previous</a>
            </li>
            {% endif %}
            <!-- blank line -->
            {% for i in products.paginator.page_range %}
            <!-- blank line -->
            {% if products.number == i %}
            <li class="page-item active"><a class="page-link">{{i}}</a></li>
            {% else %}
            <li class="page-item">
              <a class="page-link" href="?page={{i}}">{{i}}</a>
            </li>
            {% endif %}
            <!-- blank line -->
            {% endfor %}
            <!-- blank line -->
            {% if products.has_next %}
            <li class="page-item">
              <a class="page-link" href="?page={{products.next_page_number}}"
                >Next</a
              >
            </li>
            {% else %}
            <li class="page-item disabled">
              <a class="page-link">Next</a>
            </li>
            {% endif %}
          </ul>
        </nav>

        {% endif %}
      </main>
    </div>
  </div>
</section>

{% endblock %}
